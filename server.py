"""
Cricbuzz Cricket MCP Server

使用 FastMCP 的 from_openapi 方法自动生成

Version: 1.0.0
Transport: stdio
"""
import os
import json
import httpx
from fastmcp import FastMCP

# 服务器版本和配置
__version__ = "1.0.0"
__tag__ = "cricbuzz_cricket/1.0.0"

# API 配置
API_KEY = os.getenv("API_KEY", "")

# 传输协议配置
TRANSPORT = "stdio"


# OpenAPI 规范
OPENAPI_SPEC = """{\n  \"openapi\": \"3.0.0\",\n  \"info\": {\n    \"title\": \"Cricbuzz Cricket\",\n    \"version\": \"1.0.0\",\n    \"description\": \"RapidAPI: cricketapilive/cricbuzz-cricket\"\n  },\n  \"servers\": [\n    {\n      \"url\": \"https://cricbuzz-cricket.p.rapidapi.com\"\n    }\n  ],\n  \"paths\": {\n    \"/mcenter/v1/{matchId}/hscard\": {\n      \"get\": {\n        \"summary\": \"matches/get-scorecard-v2\",\n        \"description\": \"Get match scorecard\",\n        \"operationId\": \"matches/get_scorecard_v2\",\n        \"parameters\": [\n          {\n            \"name\": \"matchId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of matchId field returned in …/matches/list, …/schedules/list, …/series/get-matches, …/teams/get-schedules, …/teams/get-results, …/venues/get-matches endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"40381\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/matches/v1/recent\": {\n      \"get\": {\n        \"summary\": \"matches/recent\",\n        \"description\": \"List Recent Matches\",\n        \"operationId\": \"matches/recent\",\n        \"parameters\": [],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/matches/v1/live\": {\n      \"get\": {\n        \"summary\": \"matches/live\",\n        \"description\": \"GET Live Matches\",\n        \"operationId\": \"matches/live\",\n        \"parameters\": [],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/matches/v1/upcoming\": {\n      \"get\": {\n        \"summary\": \"matches/upcoming\",\n        \"description\": \"List Upcoming Matches\",\n        \"operationId\": \"matches/upcoming\",\n        \"parameters\": [],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/mcenter/v1/{matchId}/team/{teamId}\": {\n      \"get\": {\n        \"summary\": \"matches/get-team\",\n        \"description\": \"Get players attended the match\",\n        \"operationId\": \"matches/get_team\",\n        \"parameters\": [\n          {\n            \"name\": \"matchId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of matchId field returned in …/matches/list, …/schedules/list, …/series/get-matches, …/teams/get-schedules, …/teams/get-results, …/venues/get-matches endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"35878\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"teamId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of teamId returned in …/matches/get-info endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"9\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/mcenter/v1/{matchId}\": {\n      \"get\": {\n        \"summary\": \"matches/get-info\",\n        \"description\": \"Get match info\",\n        \"operationId\": \"matches/get_info\",\n        \"parameters\": [\n          {\n            \"name\": \"matchId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of matchId field returned in …/matches/list, …/schedules/list, …/series/get-matches, …/teams/get-schedules, …/teams/get-results, …/venues/get-matches endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"41881\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/matches/v1/{type}\": {\n      \"get\": {\n        \"summary\": \"matches/list\",\n        \"description\": \"List live, recent, upcoming matches\",\n        \"operationId\": \"matches/list\",\n        \"parameters\": [\n          {\n            \"name\": \"type\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"One of the followings : live|recent|upcoming\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/rankings/{category}\": {\n      \"get\": {\n        \"summary\": \"stats/get-icc-rankings\",\n        \"description\": \"Get ICC rankings\",\n        \"operationId\": \"stats/get_icc_rankings\",\n        \"parameters\": [\n          {\n            \"name\": \"formatType\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"One of the followings : test|odi|t20 (if isWomen parameter is 1, there will be no odi)\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"isWomen\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Set to 1 to get rankings for women\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"category\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"One of the followings : batsmen|bowlers|allrounders|teams\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/topstats/0\": {\n      \"get\": {\n        \"summary\": \"stats/get-records\",\n        \"description\": \"Get records\",\n        \"operationId\": \"stats/get_records\",\n        \"parameters\": [\n          {\n            \"name\": \"statsType\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of 'value' field returned in …/stats/get-record-filters endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"year\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Specify year to get records. Ex : 2021\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"matchType\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"The value of matchTypeId field returned right in this endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"team\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"The value of teamId field returned right in this endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"opponent\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"The value of teamId field returned right in this endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/iccstanding/team/matchtype/{matchType}\": {\n      \"get\": {\n        \"summary\": \"stats/get-icc-standings\",\n        \"description\": \"Get ICC standings\",\n        \"operationId\": \"stats/get_icc_standings\",\n        \"parameters\": [\n          {\n            \"name\": \"seasonId\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"The value of seasonStandings/id field returned right in this endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"matchType\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"One of the followings : 1-World test championship|2-World cup super league\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"1\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/topstats\": {\n      \"get\": {\n        \"summary\": \"stats/get-record-filters\",\n        \"description\": \"Get record filters\",\n        \"operationId\": \"stats/get_record_filters\",\n        \"parameters\": [],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/news/v1/cat/{categoryId}\": {\n      \"get\": {\n        \"summary\": \"news/list-by-category\",\n        \"description\": \"List latest news by category\",\n        \"operationId\": \"news/list_by_category\",\n        \"parameters\": [\n          {\n            \"name\": \"categoryId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Filter news by category, the value of id field returned in …/news/get-categories\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"5\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/news/v1/topics/{topicId}\": {\n      \"get\": {\n        \"summary\": \"news/list-by-topic\",\n        \"description\": \"List latest news by topic\",\n        \"operationId\": \"news/list_by_topic\",\n        \"parameters\": [\n          {\n            \"name\": \"topicId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Filter news by topic, the value of id field returned in …/news/get-topics\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"349\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/player/{playerId}/career\": {\n      \"get\": {\n        \"summary\": \"players/get-career\",\n        \"description\": \"Get player career\",\n        \"operationId\": \"players/get_career\",\n        \"parameters\": [\n          {\n            \"name\": \"playerId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/players/list-trending, …/players/search endpoints\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"8733\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/news/v1/player/{playerId}\": {\n      \"get\": {\n        \"summary\": \"players/get-news\",\n        \"description\": \"Get news by player\",\n        \"operationId\": \"players/get_news\",\n        \"parameters\": [\n          {\n            \"name\": \"playerId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/players/list-trending, …/players/search endpoints\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"8733\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/venue/{venueId}\": {\n      \"get\": {\n        \"summary\": \"venues/get-stats\",\n        \"description\": \"Get stats by venue\",\n        \"operationId\": \"venues/get_stats\",\n        \"parameters\": [\n          {\n            \"name\": \"venueId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/get-venues endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"24\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/venues/v1/{venueId}\": {\n      \"get\": {\n        \"summary\": \"venues/get-info\",\n        \"description\": \"Get venue info\",\n        \"operationId\": \"venues/get_info\",\n        \"parameters\": [\n          {\n            \"name\": \"venueId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/get-venues endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"45\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/teams/v1/{teamId}/schedule\": {\n      \"get\": {\n        \"summary\": \"teams/get-schedules\",\n        \"description\": \"Get scheduled matches for a team\",\n        \"operationId\": \"teams/get_schedules\",\n        \"parameters\": [\n          {\n            \"name\": \"teamId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of teamId field returned in …/teams/list endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"2\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/teams/v1/{teamId}/players\": {\n      \"get\": {\n        \"summary\": \"teams/get-players\",\n        \"description\": \"Get players by team\",\n        \"operationId\": \"teams/get_players\",\n        \"parameters\": [\n          {\n            \"name\": \"teamId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of teamId field returned in …/teams/list endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"2\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/teams/v1/{teamId}/results\": {\n      \"get\": {\n        \"summary\": \"teams/get-results\",\n        \"description\": \"Get matched results by team\",\n        \"operationId\": \"teams/get_results\",\n        \"parameters\": [\n          {\n            \"name\": \"teamId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of teamId field returned in …/teams/list endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"2\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/team/{teamId}\": {\n      \"get\": {\n        \"summary\": \"teams/get-stats-filters\",\n        \"description\": \"Get supported filters\",\n        \"operationId\": \"teams/get_stats_filters\",\n        \"parameters\": [\n          {\n            \"name\": \"teamId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of teamId field returned in …/teams/list endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"2\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/series/v1/{seriesId}\": {\n      \"get\": {\n        \"summary\": \"series/get-matches\",\n        \"description\": \"Get recent and upcoming matches by series\",\n        \"operationId\": \"series/get_matches\",\n        \"parameters\": [\n          {\n            \"name\": \"seriesId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/list or …/series/list-archives endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"3641\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/series/v1/{seriesId}/squads\": {\n      \"get\": {\n        \"summary\": \"series/get-squads\",\n        \"description\": \"Get squads by series\",\n        \"operationId\": \"series/get_squads\",\n        \"parameters\": [\n          {\n            \"name\": \"seriesId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/list or …/series/list-archives endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"3718\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/series/{seriesId}/points-table\": {\n      \"get\": {\n        \"summary\": \"series/get-points-table\",\n        \"description\": \"Get points table by series\",\n        \"operationId\": \"series/get_points_table\",\n        \"parameters\": [\n          {\n            \"name\": \"seriesId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/list or …/series/list-archives endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"3718\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/series/{seriesId}\": {\n      \"get\": {\n        \"summary\": \"series/get-stats-filters\",\n        \"description\": \"Get supported filters\",\n        \"operationId\": \"series/get_stats_filters\",\n        \"parameters\": [\n          {\n            \"name\": \"seriesId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/list or …/series/list-archives endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"3718\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/img/v1/i1/{imageId}/i.jpg\": {\n      \"get\": {\n        \"summary\": \"get-image\",\n        \"description\": \"This endpoint is used to get image by id\",\n        \"operationId\": \"get_image\",\n        \"parameters\": [\n          {\n            \"name\": \"imageId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Add 'c' in the front of imageId\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/photos/v1/detail/{galleryId}\": {\n      \"get\": {\n        \"summary\": \"photos/get-gallery\",\n        \"description\": \"Get photo gallery\",\n        \"operationId\": \"photos/get_gallery\",\n        \"parameters\": [\n          {\n            \"name\": \"galleryId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"galleryId from photos/list service\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"5374\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/photos/v1/index\": {\n      \"get\": {\n        \"summary\": \"photos/list\",\n        \"description\": \"List photo galleries\",\n        \"operationId\": \"photos/list\",\n        \"parameters\": [],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/news/v1/topics\": {\n      \"get\": {\n        \"summary\": \"news/get-topics\",\n        \"description\": \"Get all available topics\",\n        \"operationId\": \"news/get_topics\",\n        \"parameters\": [],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/news/v1/cat\": {\n      \"get\": {\n        \"summary\": \"news/get-categories\",\n        \"description\": \"Get all available categories\",\n        \"operationId\": \"news/get_categories\",\n        \"parameters\": [],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/news/v1/detail/{newsId}\": {\n      \"get\": {\n        \"summary\": \"news/detail\",\n        \"description\": \"Get news detail\",\n        \"operationId\": \"news/detail\",\n        \"parameters\": [\n          {\n            \"name\": \"newsId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of story/id field returned in …/news/list …/news/list-by-category …/news/list-by-topic endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"122025\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/news/v1/{type}\": {\n      \"get\": {\n        \"summary\": \"news/list\",\n        \"description\": \"List latest news\",\n        \"operationId\": \"news/list\",\n        \"parameters\": [\n          {\n            \"name\": \"type\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"One of the followings : index|premiumIndex\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/player/{playerId}/bowling\": {\n      \"get\": {\n        \"summary\": \"players/get-bowling\",\n        \"description\": \"Get player's bowling\",\n        \"operationId\": \"players/get_bowling\",\n        \"parameters\": [\n          {\n            \"name\": \"playerId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/players/list-trending, …/players/search endpoints\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"8733\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/player/{playerId}/batting\": {\n      \"get\": {\n        \"summary\": \"players/get-batting\",\n        \"description\": \"Get player's batting\",\n        \"operationId\": \"players/get_batting\",\n        \"parameters\": [\n          {\n            \"name\": \"playerId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/players/list-trending, …/players/search endpoints\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"8733\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/player/{playerId}\": {\n      \"get\": {\n        \"summary\": \"players/get-info\",\n        \"description\": \"Get player info\",\n        \"operationId\": \"players/get_info\",\n        \"parameters\": [\n          {\n            \"name\": \"playerId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/players/list-trending, …/players/search endpoints\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"6635\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/player/search\": {\n      \"get\": {\n        \"summary\": \"players/search\",\n        \"description\": \"Search player by name\",\n        \"operationId\": \"players/search\",\n        \"parameters\": [\n          {\n            \"name\": \"plrN\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"Example value: Tucker\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/stats/v1/player/trending\": {\n      \"get\": {\n        \"summary\": \"players/list-trending\",\n        \"description\": \"List trending players\",\n        \"operationId\": \"players/list_trending\",\n        \"parameters\": [],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/venues/v1/{venueId}/matches\": {\n      \"get\": {\n        \"summary\": \"venues/get-matches\",\n        \"description\": \"Get scheduled matches by venue\",\n        \"operationId\": \"venues/get_matches\",\n        \"parameters\": [\n          {\n            \"name\": \"venueId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/get-venues endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"45\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/news/v1/team/{teamId}\": {\n      \"get\": {\n        \"summary\": \"teams/get-news\",\n        \"description\": \"Get news by team\",\n        \"operationId\": \"teams/get_news\",\n        \"parameters\": [\n          {\n            \"name\": \"teamId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of teamId field returned in …/teams/list endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"2\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/teams/v1/{type}\": {\n      \"get\": {\n        \"summary\": \"teams/list\",\n        \"description\": \"List teams\",\n        \"operationId\": \"teams/list\",\n        \"parameters\": [\n          {\n            \"name\": \"type\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"international|league|domestic|women\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/series/v1/{seriesId}/venues\": {\n      \"get\": {\n        \"summary\": \"series/get-venues\",\n        \"description\": \"Get venues by series\",\n        \"operationId\": \"series/get_venues\",\n        \"parameters\": [\n          {\n            \"name\": \"seriesId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/list or …/series/list-archives endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"3718\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/series/v1/{seriesId}/squads/{squadId}\": {\n      \"get\": {\n        \"summary\": \"series/get-players\",\n        \"description\": \"Get players by squad and series\",\n        \"operationId\": \"series/get_players\",\n        \"parameters\": [\n          {\n            \"name\": \"seriesId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/list or …/series/list-archives endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"3718\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"squadId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of squadId field returned in …/series/get-squads endpoint\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"15826\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/news/v1/series/{seriesId}\": {\n      \"get\": {\n        \"summary\": \"series/get-news\",\n        \"description\": \"Get news by series\",\n        \"operationId\": \"series/get_news\",\n        \"parameters\": [\n          {\n            \"name\": \"seriesId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of id field returned in …/series/list or …/series/list-archives endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"3636\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/series/v1/archives/{type}\": {\n      \"get\": {\n        \"summary\": \"series/list-archives\",\n        \"description\": \"List archived series\",\n        \"operationId\": \"series/list_archives\",\n        \"parameters\": [\n          {\n            \"name\": \"year\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"Example value: \",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"lastId\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"For paging purpose, leave empty to load the first page, or the value of id field returned right in this endpoint.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"type\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"One of the followings : international|league|domestic|women\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/series/v1/{type}\": {\n      \"get\": {\n        \"summary\": \"series/list\",\n        \"description\": \"List series\",\n        \"operationId\": \"series/list\",\n        \"parameters\": [\n          {\n            \"name\": \"type\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"One of the followings : international|league|domestic|women\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/mcenter/v1/{matchId}/scard\": {\n      \"get\": {\n        \"summary\": \"matches/get-scorecard\",\n        \"description\": \"Get match scorecard\",\n        \"operationId\": \"matches/get_scorecard\",\n        \"parameters\": [\n          {\n            \"name\": \"matchId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of matchId field returned in …/matches/list, …/schedules/list, …/series/get-matches, …/teams/get-schedules, …/teams/get-results, …/venues/get-matches endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"40381\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/mcenter/v1/{matchId}/leanback\": {\n      \"get\": {\n        \"summary\": \"matches/get-leanback\",\n        \"description\": \"Get match leanback\",\n        \"operationId\": \"matches/get_leanback\",\n        \"parameters\": [\n          {\n            \"name\": \"matchId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of matchId field returned in …/matches/list, …/schedules/list, …/series/get-matches, …/teams/get-schedules, …/teams/get-results, …/venues/get-matches endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"40381\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/mcenter/v1/{matchId}/comm\": {\n      \"get\": {\n        \"summary\": \"matches/get-commentaries\",\n        \"description\": \"Get match commentaries\",\n        \"operationId\": \"matches/get_commentaries\",\n        \"parameters\": [\n          {\n            \"name\": \"iid\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"innings Id (Ex : 1)\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"tms\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"For paging purpose, leave empty to load the first page, or an Epoch timestamp value in milliseconds (Ex : 1640883600000) to load the next page. You are interested in the 'timestamp' field returned right in this endpoint.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"matchId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of matchId field returned in …/matches/list, …/schedules/list, …/series/get-matches, …/teams/get-schedules, …/teams/get-results, …/venues/get-matches endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"41881\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/mcenter/v1/{matchId}/overs\": {\n      \"get\": {\n        \"summary\": \"matches/get-overs\",\n        \"description\": \"Get match overall\",\n        \"operationId\": \"matches/get_overs\",\n        \"parameters\": [\n          {\n            \"name\": \"iid\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"innings Id (Ex : 1)\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"tms\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"For paging purpose, leave empty to load the first page, or an Epoch timestamp value in milliseconds (Ex : 1640883600000) to load the next page. You are interested in the 'timestamp' field returned right in this endpoint.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"matchId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of matchId field returned in …/matches/list, …/schedules/list, …/series/get-matches, …/teams/get-schedules, …/teams/get-results, …/venues/get-matches endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"41881\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/mcenter/v1/{matchId}/hcomm\": {\n      \"get\": {\n        \"summary\": \"matches/get-commentaries-v2\",\n        \"description\": \"Get match commentaries\",\n        \"operationId\": \"matches/get_commentaries_v2\",\n        \"parameters\": [\n          {\n            \"name\": \"iid\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"innings Id (Ex : 1)\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"tms\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"For paging purpose, leave empty to load the first page, or an Epoch timestamp value in milliseconds (Ex : 1640883600000) to load the next page. You are interested in the 'timestamp' field returned right in this endpoint.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"matchId\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"The value of matchId field returned in …/matches/list, …/schedules/list, …/series/get-matches, …/teams/get-schedules, …/teams/get-results, …/venues/get-matches endpoints.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"41881\",\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/schedule/v1/{type}\": {\n      \"get\": {\n        \"summary\": \"schedules/list\",\n        \"description\": \"List scheduled matches\",\n        \"operationId\": \"schedules/list\",\n        \"parameters\": [\n          {\n            \"name\": \"lastTime\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"description\": \"For paging purpose, leave empty to load the first page, or an Epoch timestamp value in milliseconds (Ex : 1640883600000) to load the next page. You are interested in the 'startDt' field returned right in this endpoint.\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": \"0\",\n              \"enum\": null\n            }\n          },\n          {\n            \"name\": \"type\",\n            \"in\": \"query\",\n            \"required\": true,\n            \"description\": \"One of the followings : international|league|domestic|women\",\n            \"schema\": {\n              \"type\": \"string\",\n              \"default\": null,\n              \"enum\": null\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Successful response\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {}\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"components\": {\n    \"securitySchemes\": {\n      \"ApiAuth\": {\n        \"type\": \"apiKey\",\n        \"in\": \"header\",\n        \"name\": \"X-RapidAPI-Key\"\n      }\n    }\n  },\n  \"security\": [\n    {\n      \"ApiAuth\": []\n    }\n  ]\n}"""

# 创建 HTTP 客户端
# 设置默认 headers
default_headers = {}


# RapidAPI 必需的 headers
if API_KEY:
    default_headers["X-RapidAPI-Key"] = API_KEY
    default_headers["X-RapidAPI-Host"] = "cricbuzz-cricket.p.rapidapi.com"
else:
    print("⚠️  警告: 未设置 API_KEY 环境变量")
    print("   RapidAPI 需要 API Key 才能正常工作")
    print("   请设置: export API_KEY=你的RapidAPI-Key")

# 对于 POST/PUT/PATCH 请求，自动添加 Content-Type
default_headers["Content-Type"] = "application/json"




client = httpx.AsyncClient(
    base_url="https://cricbuzz-cricket.p.rapidapi.com", 
    timeout=30.0
)


# 从 OpenAPI 规范创建 FastMCP 服务器
openapi_dict = json.loads(OPENAPI_SPEC)
mcp = FastMCP.from_openapi(
    openapi_spec=openapi_dict,
    client=client,
    name="cricbuzz_cricket",
    version=__version__
)


# 注册请求拦截器，为所有请求添加 RapidAPI headers
_original_request = client.request

async def _add_rapidapi_headers(method, url, **kwargs):
    """拦截所有请求，添加必需的 RapidAPI headers"""
    # 确保 headers 存在
    if 'headers' not in kwargs:
        kwargs['headers'] = {}
    
    # 添加 RapidAPI 必需的 headers
    if API_KEY:
        kwargs['headers']['X-RapidAPI-Key'] = API_KEY
        kwargs['headers']['X-RapidAPI-Host'] = "cricbuzz-cricket.p.rapidapi.com"
    else:
        print("⚠️  警告: API_KEY 未设置，请求可能失败")
    
    # 对于 POST/PUT/PATCH，添加 Content-Type
    if method.upper() in ['POST', 'PUT', 'PATCH']:
        if 'Content-Type' not in kwargs['headers']:
            kwargs['headers']['Content-Type'] = 'application/json'
    
    return await _original_request(method, url, **kwargs)

# 替换 request 方法
client.request = _add_rapidapi_headers


def main():
    """主入口点"""
    print(f"🚀 启动 Cricbuzz Cricket MCP 服务器")
    print(f"📦 版本: {__tag__}")
    print(f"🔧 传输协议: {TRANSPORT}")
    
    print()
    
    # 运行服务器
    
    mcp.run(transport="stdio")
    


if __name__ == "__main__":
    main()